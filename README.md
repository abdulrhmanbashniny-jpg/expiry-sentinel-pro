# ูุธุงู ุงูุชุฐููุฑ ุจุงูุงูุชูุงุกุงุช ูุชูููู ุงูุฃุฏุงุก - HR Reminder & Performance Evaluation

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุนูู ุจุดูู ูุณุชูู (Production Ready) ูุดูู:
- **ูุธุงู ุงูุชุฐููุฑุงุช**: ุชูุจููุงุช ุชููุงุฆูุฉ ูุงูุชูุงุก ุงูุนููุฏ ูุงูุฑุฎุต ูุงููุซุงุฆู
- **ูุธุงู ุชูููู ุงูุฃุฏุงุก**: ุชููููุงุช ุฏูุฑูุฉ ุดุงููุฉ ูุน ุฏุนู ุชูููู 360 ุฏุฑุฌุฉ
- **ูุณุชุดุงุฑ ุงูุงูุชุซุงู ุงูุฐูู**: ุชุญููู ูุชูุงุฑูุฑ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- **ุชูุงููุงุช ูุชุนุฏุฏุฉ**: WhatsApp, Telegram ูุน ุฌุฏููุฉ ุฏุงุฎููุฉ ุจุฏูู n8n
- **AI-to-AI Layer**: ูุงุฌูุฉ ุจุฑูุฌูุฉ ููุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฎุงุฑุฌู (API + MCP)

---

## ๐ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุงูุชุฐููุฑุงุช ุงูุชููุงุฆูุฉ
- ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ (ุนููุฏุ ุฑุฎุตุ ูุซุงุฆู) ูุน ุชูุงุฑูุฎ ุงูุชูุงุก
- ููุงุนุฏ ุชุฐููุฑ ูุฑูุฉ (7ุ 30ุ 60 ููู ูุจู ุงูุงูุชูุงุก)
- ุฅุฑุณุงู ุชูุจููุงุช ุชููุงุฆูุฉ ุนุจุฑ WhatsApp ู Telegram
- ุชุชุจุน ุญุงูุงุช ุงูุฅุฑุณุงู ูุงูุชุณููู
- **ุฌุฏููุฉ ุชููุงุฆูุฉ**: ุชุดุบูู ูููู ุงูุณุงุนุฉ 07:00 ุตุจุงุญุงู ุจุชูููุช ุงูุฑูุงุถ

### 2. ูุธุงู ุชูููู ุงูุฃุฏุงุก
- ุฏูุฑุงุช ุชูููู ุณูููุฉ/ูุตู ุณูููุฉ/ุฑุจุน ุณูููุฉ
- ุฃููุงุน ุงูุชูููู ุงููุฏุนููุฉ:
  - `self`: ุชูููู ุฐุงุชู
  - `supervisor_to_employee`: ุงููุดุฑู ูููู ุงูููุธู
  - `employee_to_supervisor`: ุงูููุธู ูููู ุงููุดุฑู (Upward)
  - `manager_to_supervisor`: ุงููุฏูุฑ ูููู ุงููุดุฑู
  - `supervisor_to_manager`: ุงููุดุฑู ูููู ุงููุฏูุฑ (Upward)
- ุชูููู 360 ุฏุฑุฌุฉ ูุน ุณุฑูุฉ ูุงููุฉ
- ุชูููุฏ ุงูููุงู ุชููุงุฆูุงู ุนูุฏ ุชูุนูู ุงูุฏูุฑุฉ
- ูุธุงู ุงูุงุนุชูุงุฏ ูุงููุดุฑ ูุชุนุฏุฏ ุงููุฑุงุญู

#### ุญุงูุงุช ุงูุชูููู (Workflow)
```
draft โ submitted โ approved โ published
```

### 3. ูุณุชุดุงุฑ ุงูุงูุชุซุงู ุงูุฐูู
- ุชุญููู ูุณุชูู ุงูุงูุชุฒุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุชูุตูุงุช ูุฎุตุตุฉ ูุชุญุณูู ุงูุฃุฏุงุก
- ุชูุงุฑูุฑ ุฏูุฑูุฉ ุดุงููุฉ

### 4. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
- ุฃุฏูุงุฑ ูุชุนุฏุฏุฉ: `system_admin`, `admin`, `hr_user`, `supervisor`, `employee`
- ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููุฑู
- ูุธุงู ุงูุชูููุถุงุช

---

## โ๏ธ ุงูุฃุชูุชุฉ ุงูุฏุงุฎููุฉ (Production)

### ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ (pg_cron)

| ุงููููุฉ | ุงูุชูููุช | ุงููุธููุฉ |
|--------|---------|---------|
| `daily-reminders-07am-riyadh` | 07:00 AM Asia/Riyadh | `automated-reminders` |

**ูุฅููุงู ุงูุฌุฏููุฉ:**
```sql
SELECT cron.unschedule('daily-reminders-07am-riyadh');
```

**ูุชุนุฏูู ุงูุฌุฏููุฉ:**
```sql
SELECT cron.schedule('daily-reminders-07am-riyadh', '0 4 * * *', $$ ... $$);
```

### Pipeline ุงูุชุดุบูู
```
1. ุฌูุจ ุงูุนูุงุตุฑ ุงููุณุชุญูุฉ (get due items)
2. ููู ุนูุตุฑ โ ููู ูุณุชูู:
   - ุงูุชุญูู ูู Rate Limit
   - ุชูููุฏ ุงูุฑุณุงูุฉ ุจุงููุงูุจ ุงูุฑุณูู (prepare-message)
   - ุงูุฅุฑุณุงู ุนุจุฑ ุงูููุงุฉ ุงูููุงุณุจุฉ (send-telegram/send-whatsapp)
   - ุชุณุฌูู ุงููุชูุฌุฉ (notification_log)
3. ุชุญุฏูุซ automation_runs ุจุงูุฅุญุตุงุฆูุงุช
```

---

## ๐จ ููุงูุจ ุงูุฑุณุงุฆู ุงูุฑุณููุฉ

### Telegram (ูุน HTML)
```
ูุฑุญุจูุง {{recipient_name}}ุ

๐ ุชุฐููุฑ: {{title}}

๐ ุงูุฑูู/ุงููุฑุฌุน: {{item_code}}
๐ข ุงููุณู: {{department_name}}
๐ ุงููุฆุฉ: {{category}}
๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก: {{due_date}}
โฐ ุงููุชุจูู: {{remaining_text}}

{{#if creator_note}}๐ ููุงุญุธุฉ: {{creator_note}}
{{/if}}๐ <a href="{{item_url}}">ุนุฑุถ ุงููุนุงููุฉ</a>

โโโโโโโโโโโโโโโโ
ูุธุงู ุชูุจููุงุช ุงูุชูุงุก ุงูุตูุงุญูุฉ
```

### WhatsApp
```
ูุฑุญุจูุง {{recipient_name}}ุ

๐ ุชุฐููุฑ: {{title}}

๐ ุงูุฑูู/ุงููุฑุฌุน: {{item_code}}
๐ข ุงููุณู: {{department_name}}
๐ ุงููุฆุฉ: {{category}}
๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก: {{due_date}}
โฐ ุงููุชุจูู: {{remaining_text}}

{{#if creator_note}}๐ ููุงุญุธุฉ: {{creator_note}}
{{/if}}๐ {{item_url}}

โโโโโโโโโโโโโโโโ
ูุธุงู ุชูุจููุงุช ุงูุชูุงุก ุงูุตูุงุญูุฉ
```

---

## ๐ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

| ุงูุชูููุฉ | ุงููุตู |
|---------|-------|
| **React 18** | ุฅุทุงุฑ ุงูุนูู ุงูุฃุณุงุณู |
| **TypeScript** | ูุบุฉ ุงูุจุฑูุฌุฉ |
| **Vite** | ุฃุฏุงุฉ ุงูุจูุงุก |
| **Tailwind CSS** | ุงูุชูุณูู |
| **shadcn/ui** | ููุชุจุฉ ุงูููููุงุช |
| **Lovable Cloud** | ุงูุจุงู ุฅูุฏ (Supabase) |
| **Edge Functions** | ุงูุฏูุงู ุงูุณุญุงุจูุฉ |
| **pg_cron** | ุฌุฏููุฉ ุงูููุงู ุงูุชููุงุฆูุฉ |

---

## ๐ ูููู ุงููุดุฑูุน

```
src/
โโโ components/           # ุงูููููุงุช ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ   โโโ ui/              # ููููุงุช shadcn/ui
โ   โโโ layout/          # ุชุฎุทูุท ุงูุตูุญุงุช
โ   โโโ dashboard/       # ููููุงุช ููุญุฉ ุงูุชุญูู
โ   โโโ items/           # ููููุงุช ุงูุนูุงุตุฑ
โ   โโโ workflow/        # ููููุงุช ุณูุฑ ุงูุนูู
โโโ pages/               # ุตูุญุงุช ุงูุชุทุจูู
โ   โโโ AutomationDashboard.tsx  # ููุญุฉ ูุฑุงูุจุฉ ุงูุชุดุบูู
โ   โโโ ...
โโโ hooks/               # React Hooks ูุฎุตุตุฉ
โโโ contexts/            # React Context
โโโ types/               # ุชุนุฑููุงุช TypeScript
โโโ integrations/        # ุชูุงููุงุช Supabase

supabase/
โโโ functions/           # Edge Functions
โ   โโโ ai-advisor/           # ูุณุชุดุงุฑ ุงูุงูุชุซุงู
โ   โโโ ai-context/           # AI-to-AI Context API
โ   โโโ ai-orchestrator/      # Agentic Multi-Agent Orchestrator
โ   โโโ automated-reminders/  # ุงูุชุฐููุฑุงุช ุงูุชููุงุฆูุฉ
โ   โโโ prepare-message/      # ุชูููุฏ ุงูุฑุณุงุฆู
โ   โโโ send-telegram/        # ุฅุฑุณุงู Telegram
โ   โโโ send-whatsapp/        # ุฅุฑุณุงู WhatsApp
โ   โโโ ...
โโโ migrations/          # ุชุฑุญููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

---

## ๐ ุงูุชูุงููุงุช

### WhatsApp (AppsLink/Evolution API)
- ุฅุฑุณุงู ุฑุณุงุฆู ูุจุงุดุฑุฉ ุนุจุฑ Evolution API
- ุชุชุจุน ุญุงูุฉ ุงูุชุณููู ุนุจุฑ Webhook
- ุชูุณูู ุงูุฃุฑูุงู ุชููุงุฆูุงู (JID format)
- Rate Limiting: 5 ุฑุณุงุฆู/ูุณุชูู/ููู

### Telegram
- ุจูุช ููุชูุจููุงุช ุงูุชููุงุฆูุฉ ูุน HTML formatting
- ุฃูุงูุฑ ุชูุงุนููุฉ (`/search`, `/expiring`, `/help`)
- ุชุณุฌูู ุงููุญุงุฏุซุงุช
- Rate Limiting: 5 ุฑุณุงุฆู/ูุณุชูู/ููู

### ุงูุฐูุงุก ุงูุงุตุทูุงุนู (Lovable AI)
- ุชุญููู ุงูุชููููุงุช
- ุชูููุฏ ุงูุชูุงุฑูุฑ
- ูุณุชุดุงุฑ ุงูุงูุชุซุงู

---

## ๐ค AI-to-AI Communication Layer

### API Layer
| Endpoint | ุงููุตู |
|----------|-------|
| `POST /ai-context/context` | ุงูุณูุงู ุงููุงูู ููููุตุฉ |
| `POST /ai-context/tools` | ุงูุฃุฏูุงุช ุงููุชุงุญุฉ |
| `POST /ai-context/schema` | ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| `POST /ai-context/runs` | ุณุฌู ุงูุชุดุบููุงุช |
| `POST /ai-context/mcp` | MCP Server metadata |

**ุงููุตุงุฏูุฉ:** `x-ai-token` header ูุทููุจ

### MCP Layer (Model Context Protocol)
- Resources: `expiry-sentinel://metadata`, `expiry-sentinel://templates`, `expiry-sentinel://schema`
- Tools: ุฌููุน ุฃุฏูุงุช ุงููููุงุก ูุชุงุญุฉ

### Agentic Multi-Agent System

| ุงููููู | ุงููุณุคูููุฉ | ุงูุฃุฏูุงุช |
|--------|-----------|---------|
| **Orchestrator** | ุชูุฌูู ุงูุทูุจุงุช | `route_to_agent`, `get_user_context` |
| **Reminder** | ุงูุชุฐููุฑุงุช ูุงูููุงูุจ | `get_due_items`, `preview_template`, `get_notification_logs` |
| **Compliance** | ุชูุงุฑูุฑ ุงูุงูุชุซุงู | `calculate_compliance`, `generate_report`, `analyze_risks` |
| **Performance** | ุงูุชููููุงุช | `get_evaluations`, `analyze_evaluation`, `get_cycle_stats` |
| **Integrations** | ูููุงุช ุงูุฅุฑุณุงู | `check_integration_status`, `test_channel`, `analyze_failures` |

---

## ๐ API Endpoints ุงูุฑุฆูุณูุฉ

| Endpoint | ุงููุตู | Auth |
|----------|-------|------|
| `POST /automated-reminders` | ุชุดุบูู ุงูุชุฐููุฑุงุช | No |
| `POST /prepare-message` | ุชุญุถูุฑ ุฑุณุงูุฉ ุงูุชุฐููุฑ | No |
| `POST /send-telegram` | ุฅุฑุณุงู ุฑุณุงูุฉ Telegram | Yes |
| `POST /send-whatsapp` | ุฅุฑุณุงู ุฑุณุงูุฉ WhatsApp | Yes |
| `POST /ai-advisor` | ุงุณุชุดุงุฑุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู | Yes |
| `POST /ai-orchestrator` | ูุธุงู ุงููููุงุก ุงูุฐูู | Yes |
| `POST /ai-context/*` | ูุงุฌูุฉ AI-to-AI | Token |

---

## ๐ ุงูุฃูุงู

- Row Level Security (RLS) ุนูู ุฌููุน ุงูุฌุฏุงูู
- ูุตุงุฏูุฉ JWT ููู Edge Functions ุงููุญููุฉ
- ุชุดููุฑ ุงูููุงุชูุญ ุงูุญุณุงุณุฉ ูู ุฌุฏูู `integrations`
- ุณุฌู ุชุณุฌููุงุช ุงูุฏุฎูู ูุงูุชุฏููู
- **RLS ูุญุณูู**:
  - `platform_metadata`: ููุท ูููุณุคูููู
  - `ai_agent_configs`: ููุท ูููุณุคูููู
  - `automation_runs`: ูุฑุงุกุฉ ูููุณุคููููุ ูุชุงุจุฉ ูููุธุงู
  - `rate_limits`: ุฅุฏุงุฑุฉ ูู ุงููุธุงู ููุท

---

## ๐ ููุญุฉ ูุฑุงูุจุฉ ุงูุชุดุบูู

ุตูุญุฉ `/automation-dashboard` ุชููุฑ:
- ุฅุญุตุงุฆูุงุช ุงูุชุดุบููุงุช (24 ุณุงุนุฉ)
- ุนุฏุฏ ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ูุงููุงุดูุฉ
- ุณุฌู ุขุฎุฑ 50 ุชุดุบูู
- ุญุงูุฉ Rate Limits ููููู
- ูุนูููุงุช Cron Job
- ุฒุฑ ุงูุชุดุบูู ุงููุฏูู

---

## ๐ฆ ุงูุจุฏุก ุงูุณุฑูุน

1. **ุฅูุดุงุก ุงููุดุฑูุน**: ุฒูุงุฑุฉ [Lovable](https://lovable.dev)
2. **ุชูุนูู Cloud**: ูุชู ุชููุงุฆูุงู
3. **ุฅุนุฏุงุฏ ุงูุชูุงููุงุช**: ูู ุตูุญุฉ "ุงูุชูุงููุงุช"
4. **ุฅุถุงูุฉ ุงููุณุชุฎุฏููู**: ูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู"
5. **ูุฑุงูุจุฉ ุงูุชุดุบูู**: ูู ุตูุญุฉ "ููุญุฉ ุงูุชุดุบูู"

---

## ๐ ุงููุซุงุฆู ุงูุฅุถุงููุฉ

- [ุฏููู ุงูุชูุงููุงุช](./INTEGRATIONS.md)
- [ุฏููู Lovable](https://docs.lovable.dev)

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุชูุงุตู ุนุจุฑ:
- [ูุฌุชูุน Lovable Discord](https://discord.com/channels/1119885301872070706)
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุฏุนู ุงูููู

---

**ุขุฎุฑ ุชุญุฏูุซ**: ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ**: 2.1.0 (Production Ready)

# ูุธุงู ุงูุชุฐููุฑ ุจุงูุงูุชูุงุกุงุช ูุชูููู ุงูุฃุฏุงุก - HR Reminder & Performance Evaluation

## ๐ ูุธุฑุฉ ุนุงูุฉ

ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ ูุนูู ุจุดูู ูุณุชูู (Production Ready) ูุดูู:
- **ูุธุงู ุงูุชุฐููุฑุงุช**: ุชูุจููุงุช ุชููุงุฆูุฉ ูุงูุชูุงุก ุงูุนููุฏ ูุงูุฑุฎุต ูุงููุซุงุฆู
- **ูุธุงู ุชูููู ุงูุฃุฏุงุก**: ุชููููุงุช ุฏูุฑูุฉ ุดุงููุฉ ูุน ุฏุนู ุชูููู 360 ุฏุฑุฌุฉ
- **ูุณุชุดุงุฑ ุงูุงูุชุซุงู ุงูุฐูู**: ุชุญููู ูุชูุงุฑูุฑ ุจุงุณุชุฎุฏุงู ุงูุฐูุงุก ุงูุงุตุทูุงุนู
- **ุชูุงููุงุช ูุชุนุฏุฏุฉ**: WhatsApp, Telegram ูุน ุฌุฏููุฉ ุฏุงุฎููุฉ ุจุฏูู n8n
- **AI-to-AI Layer**: ูุงุฌูุฉ ุจุฑูุฌูุฉ ููุฐูุงุก ุงูุงุตุทูุงุนู ุงูุฎุงุฑุฌู (API + MCP)
- **๐ Multi-Tenant**: ููุตุฉ ูุชุนุฏุฏุฉ ุงูุดุฑูุงุช ูุน ูุตู ูุงูู ููุจูุงูุงุช

---

## ๐ข Multi-Tenant Architecture (ููุตุฉ ูุชุนุฏุฏุฉ ุงูุดุฑูุงุช)

### ุงูููููู
ุงููุธุงู ูุฏุนู ุงุณุชุถุงูุฉ ุดุฑูุงุช ูุชุนุฏุฏุฉ ุนูู ููุณ ุงูููุตุฉ ูุน **ูุตู ุชุงู ููุจูุงูุงุช** ุจูู ูู ุดุฑูุฉ.

### ููููุฉ ุงูุนูู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    Platform (Lovable Cloud)                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ    โ
โ  โ Tenant A โ  โ Tenant B โ  โ Tenant C โ  โ Tenant D โ    โ
โ  โ (ุดุฑูุฉ ุฃ) โ  โ (ุดุฑูุฉ ุจ) โ  โ (ุดุฑูุฉ ุฌ) โ  โ (ุดุฑูุฉ ุฏ) โ    โ
โ  โโโโโโโโโโโโค  โโโโโโโโโโโโค  โโโโโโโโโโโโค  โโโโโโโโโโโโค    โ
โ  โ Users    โ  โ Users    โ  โ Users    โ  โ Users    โ    โ
โ  โ Items    โ  โ Items    โ  โ Items    โ  โ Items    โ    โ
โ  โ Depts    โ  โ Depts    โ  โ Depts    โ  โ Depts    โ    โ
โ  โ Settings โ  โ Settings โ  โ Settings โ  โ Settings โ    โ
โ  โ API Keys โ  โ API Keys โ  โ API Keys โ  โ API Keys โ    โ
โ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ  โโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ ุงููุนุฒููุฉ ุจู tenant_id

| ุงูุฌุฏูู | ุงููุตู |
|--------|-------|
| `tenants` | ุจูุงูุงุช ุงูุดุฑูุงุช (ุงูุงุณูุ ุงูููุฏุ ุงูุฎุทุฉุ ุงูุญุฏูุฏ) |
| `profiles` | ูููุงุช ุงููุณุชุฎุฏููู ูุน ุฑุจุท ุจู tenant |
| `items` | ุงูุนูุงุตุฑ/ุงููุนุงููุงุช |
| `departments` | ุงูุฃูุณุงู |
| `categories` | ุงููุฆุงุช |
| `recipients` | ุงููุณุชูููู |
| `reminder_rules` | ููุงุนุฏ ุงูุชุฐููุฑ |
| `message_templates` | ููุงูุจ ุงูุฑุณุงุฆู |
| `notification_log` | ุณุฌู ุงูุฅุดุนุงุฑุงุช |
| `automation_runs` | ุณุฌู ุชุดุบูู ุงูุฃุชูุชุฉ |
| `kpi_templates` | ููุงูุจ ุชูููู ุงูุฃุฏุงุก |
| `evaluation_cycles` | ุฏูุฑุงุช ุงูุชูููู |
| `evaluations` | ุงูุชููููุงุช |
| `tenant_integrations` | ุชูุงููุงุช ูู ุดุฑูุฉ (API Keys) |

### ุณูุงุณุงุช RLS (Row Level Security)

#### 1. ุงุณุชุฑุฌุงุน Tenant ุงูุญุงูู
```sql
CREATE FUNCTION public.get_current_tenant_id()
RETURNS uuid AS $$
  SELECT tenant_id FROM public.profiles 
  WHERE user_id = auth.uid()
$$ LANGUAGE sql SECURITY DEFINER;
```

#### 2. ุณูุงุณุงุช ุงููุตู ููู ุฌุฏูู
```sql
-- ูุซุงู: ุฌุฏูู items

-- ุงููุฑุงุกุฉ: ููุท ุจูุงูุงุช ุงูุดุฑูุฉ
CREATE POLICY "Items: Tenant SELECT"
ON public.items FOR SELECT
USING (
  is_system_admin(auth.uid()) OR 
  (tenant_id = get_current_tenant_id())
);

-- ุงูุฅุถุงูุฉ: ูุน ุชุญูู ูู tenant_id
CREATE POLICY "Items: Tenant INSERT"
ON public.items FOR INSERT
WITH CHECK (
  is_system_admin(auth.uid()) OR 
  ((tenant_id IS NULL) AND (get_current_tenant_id() IS NOT NULL)) OR 
  (tenant_id = get_current_tenant_id())
);

-- ุงูุชุนุฏูู: ููุท ุจูุงูุงุช ุงูุดุฑูุฉ
CREATE POLICY "Items: Tenant UPDATE"
ON public.items FOR UPDATE
USING (is_system_admin(auth.uid()) OR (tenant_id = get_current_tenant_id()))
WITH CHECK (is_system_admin(auth.uid()) OR (tenant_id = get_current_tenant_id()));

-- ุงูุญุฐู: ููุท ุจูุงูุงุช ุงูุดุฑูุฉ
CREATE POLICY "Items: Tenant DELETE"
ON public.items FOR DELETE
USING (is_system_admin(auth.uid()) OR (tenant_id = get_current_tenant_id()));
```

#### 3. Triggers ููุญูุงูุฉ ุงูุฅุถุงููุฉ

```sql
-- ููุน ุชุบููุฑ tenant_id ุจุนุฏ ุงูุฅูุดุงุก
CREATE FUNCTION public.prevent_tenant_id_change()
RETURNS trigger AS $$
BEGIN
  IF OLD.tenant_id IS DISTINCT FROM NEW.tenant_id THEN
    RAISE EXCEPTION 'Cannot change tenant_id after creation';
  END IF;
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- ุชุนููู tenant_id ุชููุงุฆูุงู ุนูุฏ ุงูุฅุถุงูุฉ
CREATE FUNCTION public.enforce_tenant_on_insert()
RETURNS trigger AS $$
BEGIN
  -- ุฑูุถ ุฅุฐุง ุญุงูู ุงููุณุชุฎุฏู ุฅุฏุฎุงู tenant ูุฎุชูู
  IF NEW.tenant_id IS NOT NULL AND NEW.tenant_id != get_current_tenant_id() THEN
    IF NOT is_system_admin(auth.uid()) THEN
      RAISE EXCEPTION 'Cannot insert records for other tenants';
    END IF;
  END IF;
  
  -- ุชุนููู ุชููุงุฆู ุฅู ูู ููุญุฏุฏ
  IF NEW.tenant_id IS NULL THEN
    NEW.tenant_id := get_current_tenant_id();
  END IF;
  
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;
```

### ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช

#### ุฅูุดุงุก ุดุฑูุฉ ุฌุฏูุฏุฉ
1. ุงูุฏุฎูู ูู **System Admin**
2. ูุชุญ ุตูุญุฉ **ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช** (`/tenant-management`)
3. ุฅุถุงูุฉ ุดุฑูุฉ ุฌุฏูุฏุฉ ูุน:
   - ุงูุงุณู (ุนุฑุจู/ุฅูุฌููุฒู)
   - ุงูููุฏ ุงููุฑูุฏ (ูุซู: `ACME`)
   - ุฎุทุฉ ุงูุงุดุชุฑุงู (Basic/Professional/Enterprise)
   - ุงูุญุฏูุฏ (ุนุฏุฏ ุงููุณุชุฎุฏูููุ ุนุฏุฏ ุงูุนูุงุตุฑ)

#### ุฏุนูุฉ ูุณุชุฎุฏููู ููุดุฑูุฉ
```sql
-- ุฌุฏูู ุงูุฏุนูุงุช
CREATE TABLE public.user_invitations (
  id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
  tenant_id uuid NOT NULL REFERENCES tenants(id),
  email text NOT NULL,
  role text NOT NULL DEFAULT 'employee',
  token text NOT NULL UNIQUE,
  invited_by uuid NOT NULL,
  expires_at timestamptz NOT NULL DEFAULT (now() + interval '7 days'),
  accepted_at timestamptz,
  created_at timestamptz NOT NULL DEFAULT now()
);
```

- Admin ููุฑุณู ุฏุนูุฉ ูุจุฑูุฏ ุฅููุชุฑููู
- ุงููุณุชุฎุฏู ููุชุญ ุฑุงุจุท ุงูุฏุนูุฉ ููููุดุฆ ุญุณุงุจู
- ููุฑุจุท ุชููุงุฆูุงู ุจููุณ `tenant_id` ุงูุฎุงุต ุจุงูู Admin

### ุงูุชูุงููุงุช ููู ุดุฑูุฉ

```sql
-- ูู ุดุฑูุฉ ููุง API Keys ุฎุงุตุฉ
CREATE TABLE public.tenant_integrations (
  id uuid PRIMARY KEY,
  tenant_id uuid NOT NULL REFERENCES tenants(id),
  integration_key text NOT NULL, -- telegram, whatsapp, n8n, ai
  config jsonb NOT NULL DEFAULT '{}',
  is_active boolean DEFAULT true,
  last_tested_at timestamptz,
  test_result jsonb,
  UNIQUE(tenant_id, integration_key)
);
```

**ูุซุงู ุงูุฅุนุฏุงุฏุงุช:**
```json
{
  "telegram": {
    "bot_token": "123456:ABC...",
    "bot_username": "@company_bot"
  },
  "whatsapp": {
    "api_base_url": "https://api.evolution.com",
    "apikey": "xxx",
    "instance_name": "company_instance"
  }
}
```

---

## ๐ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ูุธุงู ุงูุชุฐููุฑุงุช ุงูุชููุงุฆูุฉ
- ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ (ุนููุฏุ ุฑุฎุตุ ูุซุงุฆู) ูุน ุชูุงุฑูุฎ ุงูุชูุงุก
- ููุงุนุฏ ุชุฐููุฑ ูุฑูุฉ (7ุ 30ุ 60 ููู ูุจู ุงูุงูุชูุงุก)
- ุฅุฑุณุงู ุชูุจููุงุช ุชููุงุฆูุฉ ุนุจุฑ WhatsApp ู Telegram
- ุชุชุจุน ุญุงูุงุช ุงูุฅุฑุณุงู ูุงูุชุณููู
- **ุฌุฏููุฉ ุชููุงุฆูุฉ**: ุชุดุบูู ูููู ุงูุณุงุนุฉ 07:00 ุตุจุงุญุงู ุจุชูููุช ุงูุฑูุงุถ

### 2. ูุธุงู ุชูููู ุงูุฃุฏุงุก
- ุฏูุฑุงุช ุชูููู ุณูููุฉ/ูุตู ุณูููุฉ/ุฑุจุน ุณูููุฉ
- ุฃููุงุน ุงูุชูููู ุงููุฏุนููุฉ:
  - `self`: ุชูููู ุฐุงุชู
  - `supervisor_to_employee`: ุงููุดุฑู ูููู ุงูููุธู
  - `employee_to_supervisor`: ุงูููุธู ูููู ุงููุดุฑู (Upward)
  - `manager_to_supervisor`: ุงููุฏูุฑ ูููู ุงููุดุฑู
  - `supervisor_to_manager`: ุงููุดุฑู ูููู ุงููุฏูุฑ (Upward)
- ุชูููู 360 ุฏุฑุฌุฉ ูุน ุณุฑูุฉ ูุงููุฉ
- ุชูููุฏ ุงูููุงู ุชููุงุฆูุงู ุนูุฏ ุชูุนูู ุงูุฏูุฑุฉ
- ูุธุงู ุงูุงุนุชูุงุฏ ูุงููุดุฑ ูุชุนุฏุฏ ุงููุฑุงุญู

#### ุญุงูุงุช ุงูุชูููู (Workflow)
```
draft โ submitted โ approved โ published
```

### 3. Workflow ุงููุนุงููุงุช ูุน ุฅุซุจุงุช ุงูุฅููุงุก

```
new โ in_progress โ done_pending_supervisor โ finished
                  โ
         [ุฅุซุจุงุช ุงูุฅููุงุก]
         - ูุตู ูุงุฐุง ุชู
         - ุตูุฑุฉ/ูุฑูู
```

**ุงูุญููู ุงูุฌุฏูุฏุฉ:**
- `completion_description`: ูุตู ููู ุชู ุฅููุงุก ุงููููุฉ
- `completion_attachment_url`: ุฑุงุจุท ุงููุฑูู (ุตูุฑุฉ/PDF)
- `completion_date`: ุชุงุฑูุฎ ุงูุฅููุงุก
- `completed_by_user_id`: ูู ุฃููู ุงููููุฉ

### 4. ูุณุชุดุงุฑ ุงูุงูุชุซุงู ุงูุฐูู
- ุชุญููู ูุณุชูู ุงูุงูุชุฒุงู ุจุงูุฐูุงุก ุงูุงุตุทูุงุนู
- ุชูุตูุงุช ูุฎุตุตุฉ ูุชุญุณูู ุงูุฃุฏุงุก
- ุชูุงุฑูุฑ ุฏูุฑูุฉ ุดุงููุฉ

### 5. ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ูุงูุตูุงุญูุงุช
- ุฃุฏูุงุฑ ูุชุนุฏุฏุฉ: `system_admin`, `admin`, `hr_user`, `supervisor`, `employee`
- ุฅุฏุงุฑุฉ ุงูุฃูุณุงู ูุงููุฑู
- ูุธุงู ุงูุชูููุถุงุช
- **ุตูุงุญูุงุช ุงููุณุชูููู**: ุงููุณุชูู ูุฑู ุงููุนุงููุฉ ููุท ููุง ูุณุชุทูุน ุงูุชุนุฏูู

---

## ๐ ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช

| ุงูุฏูุฑ | ุงููุตู | ุงูุตูุงุญูุงุช |
|-------|-------|-----------|
| `system_admin` | ูุฏูุฑ ุงููุธุงู | ูู ุดูุก + ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช |
| `admin` | ูุฏูุฑ ุงูุดุฑูุฉ | ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ูุงููุณุชุฎุฏููู ุฏุงุฎู ุงูุดุฑูุฉ |
| `supervisor` | ูุดุฑู | ุฅุฏุงุฑุฉ ูุฑููู ููุท |
| `hr_user` | ูุณุชุฎุฏู HR | ุฅุฏุงุฑุฉ ุงูุนูุงุตุฑ ูุงูุชุฐููุฑุงุช |
| `employee` | ููุธู | ุนุฑุถ ุจูุงูุงุชู ููุท |

### ุตูุงุญูุงุช ุงููุณุชูููู (Recipients)
- **UI**: ุงููุณุชูู ูุฑู ุงููุนุงููุฉ ุจุฏูู ุฃุฒุฑุงุฑ ุงูุชุนุฏูู/ุงูุญุฐู
- **RLS**: ุฃู ูุญุงููุฉ ุชุนุฏูู ูู ุงููุณุชูู ุชูุฑูุถ

```sql
CREATE FUNCTION public.is_only_recipient_not_creator(item_id uuid, user_id uuid)
RETURNS boolean AS $$
  -- ููุฑุฌุน true ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุชูู ูููุณ ููุดุฆ
$$ LANGUAGE plpgsql SECURITY DEFINER;

-- ุณูุงุณุฉ UPDATE ุชููุน ุงููุณุชูู ูู ุงูุชุนุฏูู
CREATE POLICY "Items: Admin plus can update"
ON public.items FOR UPDATE
USING (
  (NOT is_only_recipient_not_creator(id, auth.uid())) AND
  (is_admin_or_higher(auth.uid()) OR created_by_user_id = auth.uid())
);
```

---

## โ๏ธ ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ (Self-Service)

ูู ูุณุชุฎุฏู ูุณุชุทูุน ูู ุตูุญุฉ **ุงูููู ุงูุดุฎุตู** (`/profile`):

| ุงูุฅุนุฏุงุฏ | ุงููุตู |
|---------|-------|
| ุชุบููุฑ ูููุฉ ุงููุฑูุฑ | ูุน ุงูุชุญูู ูู ุงูููุฉ ูุงูุชุฃููุฏ |
| ุชุนุฏูู ุฑูู ุงูุฌูุงู | ุจุตูุบุฉ 966XXXXXXXXX |
| ุชุนุฏูู Telegram ID | ูุนุฑู ุงูุชูููุฌุฑุงู ุงูุฑููู |
| ุชูุนูู/ุฅููุงู WhatsApp | `allow_whatsapp` |
| ุชูุนูู/ุฅููุงู Telegram | `allow_telegram` |
| ุชุนุฏูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ูุน ุชุฃููุฏ ุงูุชุบููุฑ |

### ุฃูุงู ุงูุฅุนุฏุงุฏุงุช
- RLS ูููุน ุฃู ูุณุชุฎุฏู ูู ุชุนุฏูู ุจูุงูุงุช ุบูุฑู
- ูุง ูููู ุชุบููุฑ `tenant_id` ุฃู ุงูุฃุฏูุงุฑ ูู ุงูุฅุนุฏุงุฏุงุช
- ุงูุชุบููุฑุงุช ุชูุนูุณ ููุฑุงู ุนูู ุณููู ุงูุฅุดุนุงุฑุงุช

---

## โ๏ธ ุงูุฃุชูุชุฉ ุงูุฏุงุฎููุฉ (Production)

### ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ (pg_cron)

| ุงููููุฉ | ุงูุชูููุช | ุงููุธููุฉ |
|--------|---------|---------|
| `daily-reminders-07am-riyadh` | 07:00 AM Asia/Riyadh | `automated-reminders` |

### Pipeline ุงูุชุดุบูู
```
1. ุฌูุจ ุงูุนูุงุตุฑ ุงููุณุชุญูุฉ (get due items)
2. ููู ุนูุตุฑ โ ููู ูุณุชูู:
   - ุงูุชุญูู ูู Rate Limit
   - ุงูุชุญูู ูู allow_whatsapp/allow_telegram
   - ุชูููุฏ ุงูุฑุณุงูุฉ ุจุงููุงูุจ ุงูุฑุณูู (prepare-message)
   - ุงูุฅุฑุณุงู ุนุจุฑ ุงูููุงุฉ ุงูููุงุณุจุฉ (send-telegram/send-whatsapp)
   - ุชุณุฌูู ุงููุชูุฌุฉ (notification_log)
3. ุชุญุฏูุซ automation_runs ุจุงูุฅุญุตุงุฆูุงุช
```

---

## ๐จ ููุงูุจ ุงูุฑุณุงุฆู ุงูุฑุณููุฉ

### Telegram (ูุน HTML)
```
ูุฑุญุจูุง {{recipient_name}}ุ

๐ ุชุฐููุฑ: {{title}}

๐ ุงูุฑูู/ุงููุฑุฌุน: {{item_code}}
๐ข ุงููุณู: {{department_name}}
๐ ุงููุฆุฉ: {{category}}
๐ ุชุงุฑูุฎ ุงูุงูุชูุงุก: {{due_date}}
โฐ ุงููุชุจูู: {{remaining_text}}

{{#if creator_note}}๐ ููุงุญุธุฉ: {{creator_note}}
{{/if}}๐ <a href="{{item_url}}">ุนุฑุถ ุงููุนุงููุฉ</a>

โโโโโโโโโโโโโโโโ
ูุธุงู ุชูุจููุงุช ุงูุชูุงุก ุงูุตูุงุญูุฉ
```

---

## ๐ ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ

| ุงูุชูููุฉ | ุงููุตู |
|---------|-------|
| **React 18** | ุฅุทุงุฑ ุงูุนูู ุงูุฃุณุงุณู |
| **TypeScript** | ูุบุฉ ุงูุจุฑูุฌุฉ |
| **Vite** | ุฃุฏุงุฉ ุงูุจูุงุก |
| **Tailwind CSS** | ุงูุชูุณูู |
| **shadcn/ui** | ููุชุจุฉ ุงูููููุงุช |
| **Lovable Cloud** | ุงูุจุงู ุฅูุฏ (Supabase) |
| **Edge Functions** | ุงูุฏูุงู ุงูุณุญุงุจูุฉ |
| **pg_cron** | ุฌุฏููุฉ ุงูููุงู ุงูุชููุงุฆูุฉ |
| **RLS** | ุฃูุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช |

---

## ๐ ูููู ุงููุดุฑูุน

```
src/
โโโ components/           # ุงูููููุงุช ุงููุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
โ   โโโ ui/              # ููููุงุช shadcn/ui
โ   โโโ layout/          # ุชุฎุทูุท ุงูุตูุญุงุช
โ   โโโ dashboard/       # ููููุงุช ููุญุฉ ุงูุชุญูู
โ   โโโ items/           # ููููุงุช ุงูุนูุงุตุฑ
โ   โโโ workflow/        # ููููุงุช ุณูุฑ ุงูุนูู
โ   โ   โโโ CompletionProofDialog.tsx  # ูุงูุฐุฉ ุฅุซุจุงุช ุงูุฅููุงุก
โ   โโโ profile/         # ููููุงุช ุงูููู ุงูุดุฎุตู
โ       โโโ ProfileSettingsForm.tsx    # ูููุฐุฌ ุฅุนุฏุงุฏุงุช ุงูุญุณุงุจ
โโโ pages/               # ุตูุญุงุช ุงูุชุทุจูู
โ   โโโ TenantManagement.tsx    # ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช
โ   โโโ UserProfile.tsx         # ุงูููู ุงูุดุฎุตู
โ   โโโ ...
โโโ hooks/               # React Hooks ูุฎุตุตุฉ
โ   โโโ useTenants.ts           # ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช
โ   โโโ useItemPermissions.ts   # ุตูุงุญูุงุช ุงูุนูุงุตุฑ
โ   โโโ ...
โโโ contexts/            # React Context
โโโ types/               # ุชุนุฑููุงุช TypeScript
โ   โโโ tenant.ts               # ุฃููุงุน Multi-Tenant
โโโ integrations/        # ุชูุงููุงุช Supabase

supabase/
โโโ functions/           # Edge Functions
โโโ migrations/          # ุชุฑุญููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

---

## ๐ ุงูุชูุงููุงุช

### WhatsApp (AppsLink/Evolution API)
- ุฅุฑุณุงู ุฑุณุงุฆู ูุจุงุดุฑุฉ ุนุจุฑ Evolution API
- ุชุชุจุน ุญุงูุฉ ุงูุชุณููู ุนุจุฑ Webhook
- ุชูุณูู ุงูุฃุฑูุงู ุชููุงุฆูุงู (JID format)
- Rate Limiting: 5 ุฑุณุงุฆู/ูุณุชูู/ููู
- **ูุญุชุฑู `allow_whatsapp` ูู ููู ุงููุณุชุฎุฏู**

### Telegram
- ุจูุช ููุชูุจููุงุช ุงูุชููุงุฆูุฉ ูุน HTML formatting
- ุฃูุงูุฑ ุชูุงุนููุฉ (`/search`, `/expiring`, `/help`)
- ุชุณุฌูู ุงููุญุงุฏุซุงุช
- Rate Limiting: 5 ุฑุณุงุฆู/ูุณุชูู/ููู
- **ูุญุชุฑู `allow_telegram` ูู ููู ุงููุณุชุฎุฏู**

---

## ๐ค AI-to-AI Communication Layer

### API Layer
| Endpoint | ุงููุตู |
|----------|-------|
| `POST /ai-context/context` | ุงูุณูุงู ุงููุงูู ููููุตุฉ |
| `POST /ai-context/tools` | ุงูุฃุฏูุงุช ุงููุชุงุญุฉ |
| `POST /ai-context/schema` | ูุฎุทุท ูุงุนุฏุฉ ุงูุจูุงูุงุช |
| `POST /ai-context/runs` | ุณุฌู ุงูุชุดุบููุงุช |
| `POST /ai-context/mcp` | MCP Server metadata |

---

## ๐ ุงูุฃูุงู

- Row Level Security (RLS) ุนูู ุฌููุน ุงูุฌุฏุงูู
- **Multi-Tenant Isolation**: ูู ุดุฑูุฉ ูุนุฒููุฉ ุชูุงูุงู
- ูุตุงุฏูุฉ JWT ููู Edge Functions ุงููุญููุฉ
- ุชุดููุฑ ุงูููุงุชูุญ ุงูุญุณุงุณุฉ ูู ุฌุฏูู `tenant_integrations`
- ุณุฌู ุชุณุฌููุงุช ุงูุฏุฎูู ูุงูุชุฏููู
- **Triggers** ูููุน ุชุบููุฑ `tenant_id` ุจุนุฏ ุงูุฅูุดุงุก

---

## ๐ ููุญุฉ ูุฑุงูุจุฉ ุงูุชุดุบูู

ุตูุญุฉ `/automation-dashboard` ุชููุฑ:
- ุฅุญุตุงุฆูุงุช ุงูุชุดุบููุงุช (24 ุณุงุนุฉ)
- ุนุฏุฏ ุงูุฑุณุงุฆู ุงููุฑุณูุฉ ูุงููุงุดูุฉ
- ุณุฌู ุขุฎุฑ 50 ุชุดุบูู
- ุญุงูุฉ Rate Limits ููููู
- ูุนูููุงุช Cron Job
- ุฒุฑ ุงูุชุดุบูู ุงููุฏูู

---

## ๐ฆ ุงูุจุฏุก ุงูุณุฑูุน

### ูููุณุชุฎุฏู ุงูุนุงุฏู
1. ุงุณุชูุงู ุฏุนูุฉ ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
2. ูุชุญ ุฑุงุจุท ุงูุฏุนูุฉ ูุฅูุดุงุก ุงูุญุณุงุจ
3. ุชุณุฌูู ุงูุฏุฎูู ูุงูุจุฏุก ุจุงูุนูู

### ูู System Admin
1. ุฒูุงุฑุฉ ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุดุฑูุงุช
2. ุฅูุดุงุก ุดุฑูุฉ ุฌุฏูุฏุฉ
3. ุฅุนุฏุงุฏ ุงูุชูุงููุงุช (WhatsApp/Telegram)
4. ุฏุนูุฉ ุงููุณุชุฎุฏููู

---

## ๐ ุงููุซุงุฆู ุงูุฅุถุงููุฉ

- [ุฏููู ุงูุชูุงููุงุช](./INTEGRATIONS.md)
- [ุฏููู Multi-Tenant](./docs/MULTI_TENANT.md)
- [ุฏููู Lovable](https://docs.lovable.dev)

---

## ๐ ุงูุฏุนู

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุชูุงุตู ุนุจุฑ:
- [ูุฌุชูุน Lovable Discord](https://discord.com/channels/1119885301872070706)
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููุฏุนู ุงูููู

---

**ุขุฎุฑ ุชุญุฏูุซ**: ููุงูุฑ 2026
**ุงูุฅุตุฏุงุฑ**: 3.0.0 (Multi-Tenant Production Ready)
